# Отправляем уведомления о проверке работ

Проект предназначен для оповещения ученика [dvmn.org](https://dvmn.org) о проверенных работах.

### Как запустить на ПК

1. Python3 должен быть уже установлен.

2. Используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```
3. Рекомендуется использовать [virtualenv/venv](https://docs.python.org/3/library/venv.html) для изоляции проекта.

4. Получить токен [здесь](https://dvmn.org/api/docs/) и положить его в файл `.env` под именем `DVMN_TOKEN`.

5. Для работы с Telegram потребуется:
    * Включить `VPN`, если мессенджер заблокирован в вашей стране 
    * Получить `bot token` и положить его в `.env` под именем `TG_BOT_TOKEN`, раздает токены бот `@BotFather`
    * Добавить свой `chat_id` из телеграм в `.env` под именем `TG_CHAT_ID`, получить его можно у бота `@userinfobot`
    * Начать диалог со своим ботом с помощью команды `/start`.

6. Запустите файл `check_lessons_stats.py`.

### Как запустить на сервере Heroku

1. Создайте аккаунт на [heroku.com](https://signup.heroku.com/). Бесплатный аккаунт позволяет приложению работать на сервере 550 часов в месяц, однако если привязать банковскую карту (деньги не спишут), время работы увеличится до 1000 часов.

2. Создайте новое [приложение](https://dashboard.heroku.com/new-app?org=personal-apps), лучше разместить его в Европе для ускорения ответов бота.

3. Разместите копию этого проекта в своем аккаунте на [GitHub](https://github.com).

4. На вкладке `Deploy` приложения Heroku свяжите его с проектом на GitHub и нажмите на `Deploy branch`.

5. На вкладке `Resources` включите работу `bot python3 check_lessons_stats.py`.

6. На вкладке `Settings` нажмите `Config Vars` и добавьте требуемые переменные:

    * Получите токен [здесь](https://dvmn.org/api/docs/) и добавьте его как переменную `DVMN_TOKEN`
    * Получите `bot token` для телеграм-бота, который будет присылать оповещения о проверках, добавьте его как переменную `TG_BOT_TOKEN`. Раздает токены бот `@BotFather`
    * Получите `bot token` для бота, который будет присылать оповещения об ошибках в работе, добавьте в окружение под именем `TG_LOG_BOT_TOKEN`
    * Добавьте свой `chat_id` из телеграм под именем `TG_CHAT_ID`, получить его можно у бота `@userinfobot`

7. Начните диалог со своими ботами с помощью команды `/start`.

8. На вкладке `Deploy` снова нажмите `Deploy branch`.

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
